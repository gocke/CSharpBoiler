<Window x:Class="CSharpBoiler.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="CSharpBoiler" Loaded="Window_Loaded" Closing="Window_Closing" Width="1560"
        DataContext="{Binding matchDataList, RelativeSource={RelativeSource Self}}" Icon="Boiler.ico">
    <Window.Resources>
        <Style TargetType="{x:Type DataGridCell}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding Won}" Value="False">
                    <Setter Property="Background" Value="#FFFFB3B3" />
                </DataTrigger>
                <DataTrigger Binding="{Binding Won}" Value="True">
                    <Setter Property="Background" Value="#FFAFFFAF" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
        <Style TargetType="{x:Type Button}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding Downloaded}" Value="True">
                    <Setter Property="Background" Value="LightGreen" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid Name="MainGrid">
        <Grid.Resources>
            <!--DataTemplates for DemoSection -->
            <DataTemplate x:Key="DemoTemplate" >
                <DockPanel>
                    <Button x:Name="DemoDownloadButton" Content="{Binding Demo}" Click="DemoDownloadButton_Click" />
                    <ProgressBar x:Name="DemoDownloadButtonProgressbar" Maximum="100" Minimum="0" Value="{Binding DownloadProgress, UpdateSourceTrigger=PropertyChanged}" Width="100" Margin="5,0,0,0" />
                </DockPanel>
            </DataTemplate>
            <DataTemplate x:Key="AnalyzeTemplate" >
                <DockPanel>
                    <Button x:Name="DemoAnalyzeButton" Content="Analyze" Tag="{Binding Demo}" Background="LightGray" Click="DemoAnalyzeButton_Click" />
                    <ProgressBar x:Name="DemoAnalyzeButtonProgressbar" Maximum="100" Minimum="0" Value="{Binding AnalysisProgress, UpdateSourceTrigger=PropertyChanged}" Width="100" Margin="5,0,0,0" />
                </DockPanel>
            </DataTemplate>
            <DataTemplate x:Key="DemoCommentTemplate" >
                <TextBox x:Name="DemoCommentTextBox" Text="{Binding DemoComment, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="200"></TextBox>
            </DataTemplate>
        </Grid.Resources>

        <DataGrid
            PresentationTraceSources.TraceLevel="High"
            AutoGenerateColumns="False"
            HorizontalAlignment="Left" 
            Name="MainDataGrid" 
            VerticalAlignment="Top"
            CanUserAddRows="False">

            <DataGrid.Columns >
                <DataGridTextColumn Header="Date" IsReadOnly="True" Binding="{Binding Date}"  />
                <DataGridTextColumn Header="Result" IsReadOnly="True" Binding="{Binding Result}"  />
                <DataGridTextColumn Header="Kills" IsReadOnly="True" Binding="{Binding Kills}"  />
                <DataGridTextColumn Header="Assists" IsReadOnly="True" Binding="{Binding Assists}"  />
                <DataGridTextColumn Header="Deaths" IsReadOnly="True" Binding="{Binding Deaths}"  />
                <DataGridTextColumn Header="MVPs" IsReadOnly="True" Binding="{Binding MVPs}"  />
                <DataGridTextColumn Header="Score" IsReadOnly="True" Binding="{Binding Score}"  />
                <DataGridTextColumn Header="K/D" IsReadOnly="True" Binding="{Binding KD}"  />

                <DataGridTemplateColumn Header="Demo, click to Download" CellTemplate="{StaticResource DemoTemplate}" />
                <DataGridTemplateColumn Header="Analyze, click to Analyze" CellTemplate="{StaticResource AnalyzeTemplate}" />
                <DataGridTemplateColumn Header="Demo Comment" CellTemplate="{StaticResource DemoCommentTemplate}" />

                <DataGridTextColumn Header="3Ks" IsReadOnly="True" Binding="{Binding K3}"  />
                <DataGridTextColumn Header="4Ks" IsReadOnly="True" Binding="{Binding K4}"  />
                <DataGridTextColumn Header="5Ks" IsReadOnly="True" Binding="{Binding K5}"  />
                <DataGridTextColumn Header="HS%" IsReadOnly="True" Binding="{Binding HS}"  />
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window>
